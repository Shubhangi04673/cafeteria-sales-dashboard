# üìú SQL Queries Used in Cafeteria Sales Analysis
---
## 1. üìâ Revenue Trends Over Time
```sql
-- Total sales grouped by week
SELECT FORMAT_DATE('%G-W%V',order_date) AS week,
SUM(o.quantity*m.price) AS total_revenue
FROM`cool-reach-464612-r4.Cafeteria_Sales.orders_data` o
JOIN`cool-reach-464612-r4.Cafeteria_Sales.menu_data`m
ON o.item_id=m.item_id
GROUP BY week
ORDER BY week;
---
## 2. üí∏ Average Bill Trends
```sql
--Compare average bill amounts before and after discounts
SELECT order_date,ROUND(AVG(price/(1-(discount_percent/100))),2)
AS avg_bill_before_discount,
ROUND(AVG(price),2)
AS avg_bill_after_discount
FROM`cool-reach-464612-r4.Cafeteria_Sales.orders_data`o
JOIN`cool-reach-464612-r4.Cafeteria_Sales.menu_data`m
ON o.item_id=m.item_id
JOIN`cool-reach-464612-r4.Cafeteria_Sales.discounts_data`d
ON o.order_id=d.order_id
WHERE discount_percent>0
GROUP BY order_date
ORDER BY order_date; 
---
## 3. ‚è∞ Peak Ordering Hour
```sql
-- Observe hourly ordering trends
SELECT EXTRACT(HOUR FROM order_date) AS
order_hour,COUNT(*) AS total_orders
FROM`cool-reach-464612-r4.Cafeteria_Sales.orders_data`o
GROUP BY order_hour
ORDER BY total_orders;
---
## 4. üéì Year-Wise Orders
```sql
-- Compare the orders recieved based on student's year
SELECT s.year,COUNT(o.order_id) AS total_orders
FROM`cool-reach-464612-r4.Cafeteria_Sales.orders_data`o
JOIN`cool-reach-464612-r4.Cafeteria_Sales.students_data`s
ON o.student_id=s.student_id
GROUP BY s.year
ORDER BY total_orders DESC;
---
## 5. üìà Items With Lowest Sales Volume
```sql
-- Get 4 items with lowest quantity sold
SELECT item_name,SUM(quantity)AS
total_quantity_sold
FROM`cool-reach-464612-r4.Cafeteria_Sales.orders_data`o
JOIN`cool-reach-464612-r4.Cafeteria_Sales.menu_data`m
ON o.item_id=m.item_id
GROUP BY item_name
ORDER BY total_quantity_sold ASC
LIMIT 4;
---
## 6. üí∞ Revenue Contribution By Items
```sql
-- Revenue generated by items and its contribution in total revenue
SELECT m.item_name,SUM(o.quantity*m.price) AS total_revenue
FROM`cool-reach-464612-r4.Cafeteria_Sales.orders_data`o
JOIN`cool-reach-464612-r4.Cafeteria_Sales.menu_data`m
ON o.item_id=m.item_id
GROUP BY m.item_name
ORDER BY total_revenue DESC;
